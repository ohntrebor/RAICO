name: Review Pull Request

on:
  pull_request:
    types: [opened, synchronize]

permissions:
  pull-requests: write
  contents: write

env:
  AI_PROVIDER: "gemini"
  AI_MODEL: "gemini-1.5-flash-latest"
  AI_VERSION: "v1beta"
  PROMPT: "Com base nas altera√ß√µes realizadas no meu PR, gostaria de obter recomenda√ß√µes espec√≠ficas sobre boas pr√°ticas de seguran√ßa e estilo de c√≥digo, considerando que este projeto √© um [descri√ß√£o do projeto]. Por favor, analise as do meu PR e forne√ßa sugest√µes pr√°ticas e contextualizadas para melhorar a qualidade do c√≥digo, garantindo alinhamento com padr√µes de seguran√ßa e consist√™ncia com as melhores pr√°ticas do mercado."

jobs:
  raico-review-pr:
    runs-on: ubuntu-latest

    steps:

      - name: ü§ñ Run Pull Request Review
        uses: ohntrebor/raico/.github/actions/review-pr@main
        with:
          ai_provider: ${{ env.AI_PROVIDER }} # No exemplo foi definida no pipe, mas pode cadastrar no seu reposit√≥rio se preferir
          ai_api_key: ${{ secrets.GEMINI_API_KEY }} # Cadastrar a API_KEY no secrests do seu reposit√≥rio
          ai_model: ${{ env.AI_MODEL }} # No exemplo foi definida no pipe, mas pode cadastrar no seu reposit√≥rio se preferir
          ai_version: ${{ env.AI_VERSION }} # (opcional) dependendo da AI ser√° solicitado uma vers√£o
          github_token: ${{ secrets.GITHUB_TOKEN }} # O Github gere autom√°tico em pipelines, n√£o precisa gerar
         # prompt: ${{ env.PROMPT }} # (opcional) Caso n√£o defina um prompt aqui, ser√° considerado o prompt default do reposit√≥rio RAICO